import { router } from '@kit.ArkUI';
import { MapPage } from './map/MapPage';
import { ProfilePage } from './profile/ProfilePage';

@Entry
@Component
struct MainPage {
  @State currentTabIndex: number = 0;

  aboutToAppear() {
    // åˆå§‹åŒ–
  }

  build() {
    Tabs({ index: this.currentTabIndex }) {
      // Tab 1: é¦–é¡µ
      TabContent() {
        Column() {
          Text('é¦–é¡µå¼€å‘ä¸­...')
        }
        .width('100%')
        .height('100%')
      }
      .tabBar(this.TabBuilder(0, 'é¦–é¡µ', 'ğŸ '))

      // Tab 2: æ¸¸å›­
      TabContent() {
        Column() {
          Text('æ¸¸å›­å¼€å‘ä¸­...')
        }
        .width('100%')
        .height('100%')
      }
      .tabBar(this.TabBuilder(1, 'æ¸¸å›­', 'ğŸ¡'))

      // Tab 3: åœ°å›¾
      TabContent() {
        MapPage()
      }
      .tabBar(this.TabBuilder(2, 'åœ°å›¾', 'ğŸ—ºï¸'))

      // Tab 4: æˆ‘çš„
      TabContent() {
        ProfilePage()
      }
      .tabBar(this.TabBuilder(3, 'æˆ‘çš„', 'ğŸ‘¤'))
    }
    .barPosition(BarPosition.End)
    .barMode(BarMode.Fixed)
    .onChange((index: number) => {
      this.currentTabIndex = index;
    })
    .backgroundColor('#f5f5f5')
    .barBackgroundColor('#ffffff')
  }

  // Tabæ æ„å»ºå™¨
  @Builder TabBuilder(index: number, name: string, icon: string) {
    Column({ space: 4 }) {
      Text(icon)
        .fontSize(24)
        .fontColor(this.currentTabIndex === index ? '#0086f6' : '#999999')
      
      Text(name)
        .fontSize(11)
        .fontColor(this.currentTabIndex === index ? '#0086f6' : '#999999')
        .fontWeight(this.currentTabIndex === index ? FontWeight.Medium : FontWeight.Normal)
    }
    .width('100%')
    .height(50)
    .justifyContent(FlexAlign.Center)
  }

  // æ¸¸å›­é¡µé¢å ä½ç¬¦ï¼ˆåç»­å®ç°ï¼‰
  @Builder ParkPlaceholder() {
    Column() {
      Text('æ¸¸å›­é¡µé¢')
        .fontSize(24)
        .fontWeight(FontWeight.Bold)
        .margin({ top: 100 })
      
      Text('æ•¬è¯·æœŸå¾…...')
        .fontSize(16)
        .fontColor('#999999')
        .margin({ top: 20 })
      
      Button('æŸ¥çœ‹è·¯çº¿æ¨è')
        .margin({ top: 40 })
        .onClick(() => {
          router.pushUrl({ url: 'pages/category/RoutePage' });
        })
      
      Button('æŸ¥çœ‹è‡ªç„¶æ™¯ç‚¹')
        .margin({ top: 20 })
        .onClick(() => {
          router.pushUrl({ url: 'pages/category/NaturePage' });
        })
    }
    .width('100%')
    .height('100%')
    .justifyContent(FlexAlign.Center)
    .backgroundColor('#ffffff')
  }

  // åœ°å›¾é¡µé¢å ä½ç¬¦ï¼ˆåç»­å®ç°ï¼‰
  @Builder MapPlaceholder() {
    Column() {
      Text('åœ°å›¾å¯¼èˆªé¡µé¢')
        .fontSize(24)
        .fontWeight(FontWeight.Bold)
        .margin({ top: 100 })
      
      Text('éœ€è¦é›†æˆåä¸ºMap Kit')
        .fontSize(16)
        .fontColor('#999999')
        .margin({ top: 20 })
      
      Column({ space: 16 }) {
        Text('åŠŸèƒ½è§„åˆ’:')
          .fontSize(16)
          .fontWeight(FontWeight.Medium)
          .margin({ top: 40 })
        
        Text('âœ… å›­åŒºåœ°å›¾å±•ç¤º')
          .fontSize(14)
          .fontColor('#666666')
        
        Text('âœ… æ™¯ç‚¹ä½ç½®æ ‡è®°')
          .fontSize(14)
          .fontColor('#666666')
        
        Text('âœ… å®šä½åŠŸèƒ½')
          .fontSize(14)
          .fontColor('#666666')
        
        Text('âœ… è·¯å¾„è§„åˆ’')
          .fontSize(14)
          .fontColor('#666666')
        
        Text('âœ… å¯¼èˆªè·³è½¬')
          .fontSize(14)
          .fontColor('#666666')
      }
      .alignItems(HorizontalAlign.Start)
    }
    .width('100%')
    .height('100%')
    .justifyContent(FlexAlign.Center)
    .padding(20)
    .backgroundColor('#ffffff')
  }

  // ä¸ªäººä¸­å¿ƒå ä½ç¬¦ï¼ˆåç»­æ•´åˆç°æœ‰åŠŸèƒ½ï¼‰
  @Builder PersonalPlaceholder() {
    Column() {
      Text('ä¸ªäººä¸­å¿ƒ')
        .fontSize(24)
        .fontWeight(FontWeight.Bold)
        .margin({ top: 100 })
      
      Text('æ•´åˆç°æœ‰"æˆ‘çš„"é¡µé¢åŠŸèƒ½')
        .fontSize(16)
        .fontColor('#999999')
        .margin({ top: 20 })
      
      Button('æŸ¥çœ‹è®¢å•')
        .margin({ top: 40 })
        .onClick(() => {
          router.pushUrl({ url: 'pages/order/OrderPage' });
        })
      
      Button('æŸ¥çœ‹æ”¶è—')
        .margin({ top: 20 })
        .onClick(() => {
          // è·³è½¬åˆ°æ”¶è—é¡µé¢
        })
    }
    .width('100%')
    .height('100%')
    .justifyContent(FlexAlign.Center)
    .backgroundColor('#ffffff')
  }
}
